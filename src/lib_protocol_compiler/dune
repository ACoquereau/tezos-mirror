; This file was automatically generated, do not edit.
; Edit file manifest/main.ml instead.

(library
 (name tezos_protocol_compiler)
 (public_name tezos-protocol-compiler)
 (instrumentation (backend bisect_ppx))
 (libraries
  tezos-base
  tezos-base.unix
  tezos-version
  tezos-protocol-environment.sigs
  tezos-stdlib-unix
  compiler-libs.common
  lwt.unix
  ocplib-ocamlres
  unix)
 (flags
  (:standard)
  -open Tezos_base.TzPervasives
  -open Tezos_base_unix
  -open Tezos_stdlib_unix)
 (modules Embedded_cmis_env Embedded_cmis_register Packer Compiler Defaults))

(rule
 (targets embedded_cmis_env.ml)
 (action
  (run
   %{bin:ocp-ocamlres} -format variants -o %{targets}
   %{lib:stdlib:camlinternalFormatBasics.cmi}
   %{lib:tezos-protocol-environment.sigs.stdlib-compat:tezos_protocol_environment_sigs_stdlib_compat.cmi}
   %{lib:tezos-protocol-environment.sigs.stdlib-compat:tezos_protocol_environment_sigs_stdlib_compat__V_all.cmi}
   %{lib:tezos-protocol-environment.sigs:tezos_protocol_environment_sigs.cmi}
   %{lib:tezos-protocol-environment.sigs:tezos_protocol_environment_sigs__V0.cmi}
   %{lib:tezos-protocol-environment.sigs:tezos_protocol_environment_sigs__V1.cmi}
   %{lib:tezos-protocol-environment.sigs:tezos_protocol_environment_sigs__V2.cmi}
   %{lib:tezos-protocol-environment.sigs:tezos_protocol_environment_sigs__V3.cmi}
   %{lib:tezos-protocol-environment.sigs:tezos_protocol_environment_sigs__V4.cmi}
   %{lib:tezos-protocol-environment.sigs:tezos_protocol_environment_sigs__V5.cmi}
   %{lib:tezos-protocol-environment.sigs:tezos_protocol_environment_sigs__V6.cmi}
   %{lib:tezos-protocol-environment.sigs:tezos_protocol_environment_sigs__V7.cmi})))

(rule
 (targets embedded_cmis_register.ml)
 (action
  (run
   %{bin:ocp-ocamlres} -format variants -o %{targets}
   %{cmi:registerer/tezos_protocol_registerer})))

(rule
 (targets defaults.ml)
 (action
  (write-file
   %{targets}
   "let warnings = \"+a-4-40..42-44-45-48-60-67-69-70\"")))

(library
 (name tezos_protocol_compiler_native)
 (public_name tezos-protocol-compiler.native)
 (instrumentation (backend bisect_ppx))
 (libraries
  tezos-base
  tezos-protocol-compiler
  compiler-libs.optcomp)
 (flags
  (:standard)
  -open Tezos_base.TzPervasives
  -open Tezos_protocol_compiler)
 (modules Native))

(install
 (package tezos-protocol-compiler)
 (section libexec)
 (files final_protocol_versions))
